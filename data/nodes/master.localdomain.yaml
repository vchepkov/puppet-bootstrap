---
classes:
  - bootstrap::master
  - bootstrap::mco
  - bootstrap::dashboard
  - bootstrap::hiera
  - bootstrap::r10k
  - choria::broker

apache::mod::wsgi::mod_path: mod_wsgi_python3.so
apache::mod::wsgi::package_name: python3-mod_wsgi

choria::manage_package_repo: true

# Workaround for theforeman/puppet module insisting setting environment
bootstrap::master::environment: "%{server_facts.environment}"

# setup vagrant user as an administrator
bootstrap::mco::admins:
  - vagrant

mcollective::client: true

puppet::additional_settings:
  color: 'false'
  strict: 'off'
puppet::server_puppetserver_version: '6.12.0'
puppet::server::cipher_suites:
  - 'TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256'
  - 'TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256'
  - 'TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384'
  - 'TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384'
puppet::server_check_for_updates: false
puppet::server_common_modules_path:
  - /etc/puppetlabs/code/modules
puppet::server_environment_class_cache_enabled: true
puppet::server_external_nodes: ''
puppet::server_jvm_min_heap_size: '512m'
puppet::server_jvm_max_heap_size: '512m'
puppet::server_puppetserver_trusted_agents:
  - "%{trusted.certname}"
puppet::server_ruby_load_paths:
  - '/opt/puppetlabs/puppet/lib/ruby/vendor_ruby'
  - '/opt/puppetlabs/puppet/cache/lib'
puppet::server_strict_variables: true
puppet::show_diff: true

puppetdb::server::cipher_suites: 'TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384'
puppetdb::server::node_ttl: '0s'
puppetdb::server::node_purge_ttl: '1d'

r10k::deploy_settings:
  generate_types: true
